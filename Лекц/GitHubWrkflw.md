**Програмна інженерія в системах управління. Лекції.** Автор і лектор: Олександр Пупена 

| [<- до лекцій](README.md) | [на основну сторінку курсу](../README.md) |
| ------------------------- | ----------------------------------------- |
|                           |                                           |

# Git Hub actions

## [Про Git Hub actions](https://help.github.com/en/actions/getting-started-with-github-actions/about-github-actions)

Дії GitHub допоможуть вам автоматизувати робочі процеси з розробки програмного забезпечення в тому самому місці, де ви зберігаєте код та співпрацюєте над запитами на пул. Ви можете писати окремі завдання, що називаються діями (actions), і комбінувати їх для створення користувальницького робочого процесу (workflow). **Робочі процеси** (**workflow**) - це спеціалізовані автоматизовані процеси, які ви можете налаштувати у своєму сховищі для побудови, тестування, пакування, випуску чи розгортання будь-якого кодового проекту на GitHub.

За допомогою GitHub Actions ви можете будувати безперервну інтеграцію (CI) та можливості неперервного розгортання (CD) безпосередньо у вашому сховищі. Дії GitHub (GitHub Actions) надають повноцінну послугу безперервної інтеграції GitHub. Для отримання додаткової інформації див. "[About continuous integration](https://help.github.com/en/articles/about-continuous-integration)."

Робочі процеси працюють у Linux, macOS, Windows та контейнерах на машинах, розміщених на GitHub, названі **виконувачами** ('**runners**'). Крім того, ви також можете розмістити власних виконувачів для запуску робочих процесів на машинах, якими ви володієте або керуєте. Для отримання додаткової інформації див. "[About self-hosted runners](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/about-self-hosted-runners)."

Ви можете створювати робочі процеси, використовуючи дії, означені у вашому сховищі, дії з відкритим кодом у загальнодоступному сховищі на GitHub або опублікованим образом контейнера Docker. Робочі процеси у сховищах форк не працюють за замовчуванням.

Ви можете виявити дії, які потрібно використовувати у своєму робочому процесі на GitHub, та створити дії, які потрібно ділитися спільнотою з GitHub. Для отримання додаткової інформації про створення власної дії див  "[Creating actions](https://help.github.com/en/actions/creating-actions)."

## Простий приклад

Наведений нижче приклад файлу YAML для означення workflow, який запускається при прикріпленні будь якої теми і виводить в консоль віртуальної машини фразу "Hello World"! 

```yaml
# самий прстий workflow, простіше я не придумав
# створює віртуалку і запускає там команду в bash
name: Hello world 1 # назва workflow  
on:                 # це подія, яка вказує коли буде запускатися workflow
  issues:           # назва події - коли щось відбувається з issues 
    types: pinned   # тип активності - прикрпілення  
# https://help.github.com/en/actions/reference/events-that-trigger-workflows#issues-event-issues 
jobs:               # перелік завдань
  job1:             # назва першого завдання
    runs-on: ubuntu-latest # тип машини, на якій виконувати завдання
    steps:                 # кроки 
      - name: step1        # назва кроку  
        run: echo Hello world! # виконує команди командного рядка
```

Після запуску на GitHub можна побачити результат запуску для кожного завдання та кроку.

![](GitHubMedia/13.png)



## [Основні концепції](https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions)

### Action (Дія)

Індивідуальні завдання, які ви поєднуєте як кроки для створення роботи. Дії - це найменший портативний будівельний блок робочого процесу (workflow). Ви можете створювати власні дії, користуватися діями, спільними для спільноти GitHub, та налаштовувати публічні дії. Щоб використовувати дію в робочому процесі, потрібно включити її як крок.

### Artifact (Артефакт)

Артефакти - це файли, створені при побудові (build) та тестуванні коду. Наприклад, артефакти можуть включати бінарні файли або файли пакунків, результати тестів, скріншоти або файли журналів. Артефакти пов'язані з запуском робочого процесу, де вони були створені і можуть використовуватися іншим завданням або розгортатися.

### Continuous integration (CI)

Практика розробки програмного забезпечення часто здійснює невеликі зміни коду до спільного сховища. За допомогою GitHub Actions ви можете створювати власні робочі процеси CI, які автоматизують створення та тестування вашого коду. З вашого сховища ви можете переглянути стан змін вашого коду та докладні журнали для кожної дії у вашому робочому процесі. CI економить час розробників, надаючи негайний зворотній зв'язок щодо змін коду для швидшого виявлення та усунення помилок.

### Continuous deployment (CD)

Неперервне розгортання ґрунтується на неперервній інтеграції (CI). Коли новий код введено і проходить ваші тести на CI, код автоматично розгортається на виробництво. За допомогою GitHub Actions ви можете створювати власні робочі процеси CD, щоб автоматично розгортати ваш код у будь-яку хмару, сервіс, що розміщений на власній основі, або платформу зі свого сховища. CD економить час розробників за рахунок автоматизації процесу розгортання та розгортає перевірений, стабільний код швидше змінюється для ваших клієнтів.

### Event (Подія)

Конкретна діяльність, яка запускає запуск робочого процесу. Наприклад, активність може походити з GitHub, коли хтось натискає на коміт до сховища або коли створюється запит на пул чи issue. Ви також можете налаштувати робочий процес для запуску, коли відбувається зовнішня подія, використовуючи repository dispatch webhook.

### GitHub-hosted runner (виконувач GitHub)

GitHub розміщує виконувачі Linux, Windows та macOS. Роботи виконуються у новому екземплярі віртуальної машини, що включає загальновживане, попередньо встановлене програмне забезпечення. GitHub виконує всі оновлення та обслуговування виконувачів, розміщених на GitHub. Ви не можете налаштувати апаратну конфігурацію виконувачів, розміщених у GitHub. Для отримання додаткової інформації, див "[Virtual environments for GitHub-hosted runners](https://help.github.com/en/github/automating-your-workflow-with-github-actions/virtual-environments-for-github-hosted-runners)."

### Job (Завдання)

Набір кроків, які виконуються на одному виконувачі. Ви можете визначити правила залежності того, як виконуються завдання у файлі робочого процесу. Завдання можуть працювати паралельно або послідовно виконуватись залежно від стану попереднього завдання. Наприклад, робочий процес може мати два послідовних завдання, які будують і перевіряють код, де тестове завдання залежить від стану завдання збірки. Якщо завдання збірки не вдалося, тестове завдання не запуститься. Для виконувачів, що розміщуються в GitHub, кожне завдання в робочому процесі виконується в новому екземплярі віртуального середовища.

### Runner (Виконувач)

Будь-яка машина із встановленим застосунком виконувача GitHub Actions. Ви можете використовувати виконувач, який розміщується на GitHub, або розмістити власного виконувача. Виконувач чекає наявних завдань. Коли виконувач бере завдання, він виконує завдання та звітуж про прогрес, журнали та кінцеві результати назад до GitHub. Виконувачі виконують по одному завданню за раз. Докладніше див "[GitHub-hosted runner](https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#github-hosted-runner)" and "[Self-hosted runner](https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#self-hosted-runner)."

### Self-hosted runner

Машина, якою ви керуєте та підтримуєте, із встановленим застосунком виконувача. Самостійно розміщені виконувачі пропонують більше керування над апаратними, операційними системами та програмними засобами, ніж надають виконувачі, розміщені GitHub. За допомогою Self-hosted виконувачів ви можете створити конфігурацію обладнання на замовлення з більшою потужністю або процесором пам'яті для виконання великих завдань, встановити програмне забезпечення, доступне у вашій локальній мережі, та вибрати операційну систему, яку не пропонують виконувачі, розміщені GitHub. Для отримання додаткової інформації див. "[Hosting your own runners](https://help.github.com/en/github/automating-your-workflow-with-github-actions/hosting-your-own-runners)."

### Step (Крок)

Крок - це індивідуальна задача (task), яке може виконувати команди чи дії. Завдання конфігурує один або кілька кроків. Кожен крок у роботі виконується на одному і тому ж виконувачі, дозволяючи діям у цьому завданні обмінюватися інформацією за допомогою файлової системи.

### Virtual environment (Віртуальне середовище)

Віртуальне середовище виконувача, розміщеного у GitHub, включає конфігурацію апаратного забезпечення віртуальної машини, операційну систему та встановлене програмне забезпечення. Для отримання додаткової інформації див "[Virtual environments for GitHub-hosted runners](https://help.github.com/en/github/automating-your-workflow-with-github-actions/virtual-environments-for-github-hosted-runners)."

### Workflow (Робочий процес)

Налаштований автоматизований процес, який ви можете налаштувати у вашому сховищі для побудови, тестування, упаковки, випуску чи розгортання будь-якого проекту на GitHub. Робочі процеси складаються з одного або декількох завдань (jobs) і можуть бути заплановані або активовані подією.

### Workflow file (файл робочого процесу)

Файл YAML, який означує конфігурацію вашого робочого процесу щонайменше з одним завданням. Цей файл знаходиться в корені вашого сховища GitHub в каталозі `.github/workflows`.

### Workflow run (запуск робочого процесу)

Екземпляр вашого робочого процесу, який запускається, коли відбувається попередньо налаштована подія. Ви можете побачити завдання, дії, журнали та статуси для кожного запущеного робочого процесу.

## [Конфігурування та керування робочими процесами](https://help.github.com/en/actions/configuring-and-managing-workflows)

### [Конфігурування робочими процесами](https://help.github.com/en/actions/configuring-and-managing-workflows/configuring-a-workflow)

Ви можете створити більше одного робочого процесу в сховищі. Ви повинні зберігати робочі процеси в каталозі `.github/workflows`  у корені вашого сховища.

Робочі процеси повинні мати принаймні одне завдання (job), а завдання містять набір кроків (steps), які виконують окремі задачі (task). Кроки можуть запускати команди або використовувати дію (action). Ви можете створювати власні дії або використовувати дії, якими ділиться спільнота GitHub, та налаштовувати їх за потребою.

Ви можете налаштувати робочий процес для запуску, коли відбувається подія GitHub, за графіком або із зовнішньої події.

Вам потрібно налаштувати робочі процеси за допомогою синтаксису YAML та зберегти їх як файли робочого процесу у вашому сховищі. Після того, як ви успішно створили файл робочого процесу YAML та запустили робочий процес, ви побачите журнали збірки, результати тестів, артефакти та статуси для кожного кроку вашого робочого процесу. Для отримання додаткової інформації див. "[Managing a workflow run](https://help.github.com/en/articles/managing-a-workflow-run)."

 ![Annotated workflow run image](GitHubMedia/3.png)

Ви також можете отримувати сповіщення про оновлення стану робочого процесу. Для отримання додаткової інформації про параметри сповіщення див.  "[Configuring notifications](https://help.github.com/en/github/managing-subscriptions-and-notifications-on-github/configuring-notifications#github-actions-notification-options)."

### Створення файлу робочого процесу (workflow file)

На високому рівні це кроки для додавання файлу робочого процесу. Ви можете знайти конкретні приклади конфігурації в наступних розділах.

1. У корені вашого сховища створіть каталог із назвою `.github/workflows` для зберігання файлів робочого процесу.

2. У `.github/workflows` додайте файл ` .yml` або `.yaml` для вашого робочого процесу. Наприклад, `.github/workflows/continuous-integration-workflow.yml`.
3. Використовуйте довідникову документацію "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions)" для вибору подій для запуску дії, додавання дій та налаштувати робочий процес.
4. Запропонуйте зміни у файлі робочого процесу до гілки, де ви хочете працювати.

#### Приклад файлу робочого процесу 

```yaml
name: Greet Everyone
# Цей робочий процес запускається при завантженні (push) на сховище.
on: [push]

jobs:
  build:
    name: Greeting  # імя job
    runs-on: ubuntu-latest     # це завдання запускається на Linux
    steps:
      # Цей крок використовує hello-world-javascript-action з GitHub: https://github.com/actions/hello-world-javascript-action
      - name: Hello world
        uses: actions/hello-world-javascript-action@v1
        with:
          who-to-greet: 'Mona the Octocat'
        id: hello
      # Цей крок виводить на вихід (час) з попередньої дії кроку 
      - name: Echo the greeting's time
        run: echo 'The time was ${{ steps.hello.outputs.time }}.'
```

**Примітка:** Переконайтеся, що ви призначаєте лише валідні файли робочого процесу до вашого сховища. Якщо  `.github/workflows`  містить недійсний файл робочого процесу, дії GitHub генерують невдалий запуск робочого процесу для кожного нового коміту.

### Ініціювання робочого процесу через події 

Ви можете налаштувати робочий процес для запуску один раз:

- Подія на GitHub відбувається, наприклад, коли хтось робить пуш до сховища або коли створюється запит на пул чи ішью.
- Починається планова подія.
- відбувається зовнішня подія.

Щоб запустити робочий процес після того, як подія відбувається на GitHub, додайте `on:`  та значення події після імені робочого процесу. Наприклад, цей робочий процес спрацьовує, коли пушаться зміни до будь-якої гілки сховища.

```yaml
name: descriptive-workflow-name
on: push
```

Для планування робочого процесу можна використовувати синтаксис POSIX cron у вашому файлі робочого процесу. Найкоротший інтервал, з якого можна виконувати заплановані робочі процеси, - один раз на 5 хвилин. Наприклад, цей робочий процес спрацьовує щогодини.

```yaml
on:
  schedule:
    - cron:  '0 * * * *'
```

Щоб запустити робочий процес після того, як відбувається зовнішня подія, ви можете викликати подію webhook `repository_dispatch`, викликавши кінцеву точку REST API "Create a repository dispatch event". Для отримання додаткової інформації див. "[Create a repository dispatch event](https://developer.github.com/v3/repos/#create-a-repository-dispatch-event)"  в документації GitHub Developer.

Для отримання додаткової інформації та прикладів, див "[Events that trigger workflows](https://help.github.com/en/articles/events-that-trigger-workflows#webhook-events)."

### Фільтрація для вказаних гілок, тегів та шляхів 

Ви можете налаштувати робочий процес, щоб він працював лише на певних гілках. Наприклад, цей робочий процес запускається, коли пуш, що включає файли в каталозі `test`, робиться на гілці ` master`, або пушиться в тег `v1`.

```yaml
on:
  push:
    branches:
      - master
    tags:
      - v1
    # шляхи до файлу, які слід врахувати у події. Необов’язково; за замовчуванням для всіх.
    paths:
      - 'test/*'
```

Для отримання додаткової інформації про синтаксис фільтрів гілок, тегів та шляхів див "[`on..`](https://help.github.com/en/articles/workflow-syntax-for-github-actions#onpushpull_requestbranchestags)" та "[`on..paths`](https://help.github.com/en/articles/workflow-syntax-for-github-actions#onpushpull_requestpaths)."

### Вибір Виконувача (runner)

Ви можете запускати робочі процеси на виконувачах, розміщених на GitHub або виконувачах, що розміщуються самостійно. Завдання можуть працювати безпосередньо на машині або в контейнері Docker.

Ви можете вказати виконувач для кожного завдання в робочому процесі, використовуючи  `runs-on`. Для отримання додаткової інформації про `runs-on`, див "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions#jobsjob_idruns-on)."

#### Використання виконувачів GitHub-hosted 

Ви можете вибрати різні типи та версії віртуальних хост-машин, включаючи Linux, Windows та macOS. Кожне завдання в робочому процесі виконується в новому екземплярі віртуального середовища, а кроки в межах завдання можуть обмінюватися інформацією за допомогою файлової системи. Для отримання додаткової інформації, див "[Virtual environments for GitHub Actions-hosted runners](https://help.github.com/en/articles/virtual-environments-for-github-actions)."

Наприклад, ви можете використовувати `ubuntu-latest`, щоб вказати останню версію виконувача, розміщеного на Ubuntu GitHub.

```yaml
runs-on: ubuntu-latest
```

#### Використання self-hosted виконувачів 

Ви можете використовувати мітки для маршрутизації завдань на конкретні типи виокнувачв. Усі виконувачі self-hosted отримують мітку `self-hosted`, і кожен виконувач self-hosted  має мітки для своєї операційної системи та архітектури системи. Для отримання додаткової інформації див "[Using self-hosted runners in a workflow](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/using-self-hosted-runners-in-a-workflow)."

Наприклад, якщо ви додали власний виконувач з операційною системою Linux та архітектурою ARM32, ви можете вибрати цього виконувача, використовуючи мітки  `self-hosted`, `linux`, та`ARM32`

```yaml
runs-on: [self-hosted, linux, ARM32]
```

### Конфігурування build matrix

Для тестування в декількох операційних системах, платформах та версій мов одночасно можна налаштувати матрицю збірки.

Матриця збірки дозволяє протестувати свій код за допомогою різного програмного забезпечення та конфігурацій операційної системи. Наприклад, робочий процес може виконувати завдання для більш ніж однієї підтримуваної версії мови, операційної системи чи інструменту. Для кожної конфігурації працює копія завдання та повідомляє про стан.

Ви можете вказати матрицю збірки у вашому файлі робочого процесу за допомогою масиву, у якому перераховані параметри конфігурації у розділі `Strategy:`. Наприклад, ця матриця збірки буде виконувати завдання з різними версіями Node.js та Ubuntu, операційної системи Linux.

Коли ви визначаєте матрицю операційних систем, ви повинні встановити значення `run-on` для контекстної властивості ` matrix.os`.

```yaml
runs-on: ${{ matrix.os }}
strategy:
  matrix:
    os: [ubuntu-16.04, ubuntu-18.04]
    node: [6, 8, 10]
```

Див "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions#jobsjob_idstrategymatrix)."

### Використання checkout дій 

Є кілька стандартних дій, які ви можете використовувати у своєму робочому процесі. Дія checkout - це стандартна дія, яку потрібно включити у свій робочий процес перед іншими діями, коли:

- Для вашого робочого процесу потрібна копія коду вашого сховища, наприклад, коли ви створюєте і тестуєте своє сховище або використовуєте постійну інтеграцію.
- У вашому робочому процесі є хоча б одна дія, визначена в одному сховищі. Для отримання додаткової інформації, див "[Referencing actions in your workflow](https://help.github.com/en/actions/configuring-and-managing-workflows/configuring-a-workflow#referencing-actions-in-your-workflow)."

Щоб використовувати стандартну дію оформлення замовлення без додаткових специфікацій, включіть цей крок:

```yaml
- uses: actions/checkout@v2
```

Використання `v2` у цьому прикладі гарантує, що ви використовуєте стабільну версію дії з оформлення замовлення. Для отримання додаткової інформації див [the checkout action](https://github.com/actions/checkout).

### Вибір тип дії для робочого процесу 

Існують різні типи дій, які ви можете використовувати у своєму робочому процесі відповідно до потреб вашого проекту:

- Дії контейнерів Docker
- дії JavaScript

Див "[About actions](https://help.github.com/en/articles/about-actions#types-of-actions)."

Вибираючи тип дій, який потрібно використовувати у вашому робочому процесі, радимо вивчити існуючі дії у загальнодоступних сховищах або на Docker hub та потенційно налаштувати ці дії для вашого проекту.

Ви можете переглядати та використовувати дії, створені GitHub в організації [github.com/actions](https://github.com/actions). Щоб відвідати Docker Hub, див. "[Docker Hub](https://www.docker.com/products/docker-hub)" на сайті Docker.

### Посилання на дії в workflow

Щоб посилатися на дії у вашому файлі робочого процесу з правильним синтаксисом, ви повинні врахувати, де означено дію.

Робочі процеси можуть використовувати дії, означені в:

- Публічному сховищі
- Тому самому сховищі, де файл вашого робочого процесу посилається на дії
- Опублікований образ контейнера Docker на Docker Hub

Для використання дії, означеної в приватному сховищі, і файл робочого процесу, і дія повинні бути в одному сховищі. Ваш робочий процес не може використовувати дії, означені в інших приватних сховищах, навіть якщо інше приватне сховище знаходиться в одній організації.

Щоб зберегти робочий процес стабільним, навіть коли проводиться оновлення дії, ви можете посилатися на версію дії, яку ви використовуєте, вказавши номер файлу Git ref чи Docker у файлі робочого процесу. Приклади див "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions#jobsjob_idstepsuses)."

Див також "[Workflow syntax for GitHub Actions](https://help.github.com/en/github/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions)."

#### Посилання на дію в публічному репозиторії 

Для цього треба використовувати синтаксис `{owner}/{repo}@{ref}` або `{owner}/{repo}/{path}@{ref}`.

```yaml
jobs:
  my_first_job:
    name: My Job Name
      steps:
        - uses: actions/setup-node@v1
          with:
            node-version: 10.x
```

Щоб побачити повний приклад робочого процесу, див репозиторій шаблону [setup node](https://github.com/actions/setup-node) .

#### Посилання на дію в тому ж репозиторію де є workflow file що виокристовує дію 

Якщо дія визначена в тому самому сховищі, де ваш файл робочого процесу використовує дію, ви можете в файлі робочого процесу посилатися на дію або з синтаксисом ‌`{owner}/{repo}@{ref}` або `./path/to/dir` .

Приклад файлової структури репозиторію:

```gherkin
|-- hello-world (repository)
|   |__ .github
|       └── workflows
|           └── my-first-workflow.yml
|       └── actions
|           |__ hello-world-action
|               └── action.yml
```

Приклад workflow file:

```yaml
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      # This step checks out a copy of your repository.
      - uses: actions/checkout@v2
      # This step references the directory that contains the action.
      - uses: ./.github/actions/hello-world-action
```

#### Посилання на контейнер на Docker Hub

Якщо дія означена в опублікованому образі контейнера Docker на Docker Hub, ви повинні посилатися на дію з наступним синтаксисом `docker://{image}:{tag}` .  Щоб захистити свій код та дані, ми наполегливо рекомендуємо перевірити цілісність образу контейнера Docker від Docker Hub, перш ніж використовувати його у своєму робочому процесі.

```yaml
jobs:
  my_first_job:
    steps:
      - name: My first step
        uses: docker://alpine:3.8
```

Деякі приклади Docker actions, див [Docker-image.yml workflow](https://github.com/actions/starter-workflows/blob/master/ci/docker-image.yml) та "[Creating a Docker container action](https://help.github.com/en/articles/creating-a-docker-container-action)."

Див також "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions#jobsjob_idstepsuses)."

### Додавання знаку статусу workflow до вашого репозиторію

Значки стану показують, чи поточний процес в даний час не працює або проходить. Загальне місце для додавання значка статусу - у файлі README.md вашого сховища, але ви можете додати його на будь-яку веб-сторінку, яку ви хочете. За замовчуванням значки відображають статус вашої гілки за замовчуванням (як правило, `master`). Ви також можете відобразити стан запуску робочого процесу для певної гілки чи події, використовуючи параметри запиту `branch`  та `event`  в URL-адресі.

![img](https://help.github.com/assets/images/help/repository/actions-workflow-status-badge.png)

Якщо у вашому робочому процесі використовується ключове слово `name` , вам слід посилатися на робочий процес за назвою. Якщо назва вашого робочого процесу містить пробіл, вам потрібно буде замінити пробіл кодованою URL-адресою рядка `% 20`. Більше інформації про ключове слово `name` див "[Workflow syntax for GitHub Actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions#name)."

```vim
https://github.com/<OWNER>/<REPOSITORY>/workflows/<WORKFLOW_NAME>/badge.svg
```

Крім того, якщо у вашому робочому процесі немає `name`,   Ви повинні посилатися на файл робочого процесу за допомогою шляху файлу щодо кореневого каталогу сховища.

**Примітка.** Посилання на файл робочого процесу за допомогою шляху файлу не працює, якщо робочий процес має `name`

```vim
https://github.com/<OWNER>/<REPOSITORY>/workflows/<WORKFLOW_FILE_PATH>/badge.svg
```

#### Приклад використання workflow name

This Markdown example adds a status badge for a workflow with the name "Greet Everyone." The `OWNER` of the repository is the `actions` organization and the `REPOSITORY` name is `hello-world`.

Цей приклад Markdown додає значок статусу для робочого процесу з назвою "Greet Everyone". `OWNER`  сховища - це організація `actions` , а назва `REPOSITORY`  -  `hello-world`..

```crystal
![](https://github.com/actions/hello-world/workflows/Greet%20Everyone/badge.svg)
```

#### Приклад використання шляху workflow file 

Цей приклад розміщення додає значок статусу для робочого процесу за допомогою файлу `.github/workflows/main.yml`. `OWNER`  сховища - це організація `actions` , а назва `REPOSITORY`  -  `hello-world`.

```crystal
![](https://github.com/actions/hello-world/workflows/.github/workflows/main.yml/badge.svg)
```

#### Приклад використання параметру `branch` 

Цей приклад розміщення додає значок статусу для гілки з назвою `feature-1`.

```crystal
![](https://github.com/actions/hello-world/workflows/Greet%20Everyone/badge.svg?branch=feature-1)
```

#### Приклад використання параметру `event` 

Цей приклад розміщення додає значок, який відображає стан запуску робочого процесу, ініційований подією `pull_request`.

```crystal
![](https://github.com/actions/hello-world/workflows/Greet%20Everyone/badge.svg?event=pull_request)
```

## [Про Actions (дії)](https://help.github.com/en/actions/building-actions/about-actions#about-actions)

**Actions** (**дії**) - це індивідуальні завдання, які можна комбінувати для створення робіт та налаштування робочого процесу (workflow). Ви можете створювати власні дії, а також використовувати та налаштовувати дії, якими ділиться спільнота GitHub.

Ви можете створювати дії, записуючи власний код, який взаємодіє з вашим сховищем будь-яким способом, включаючи інтеграцію з GitHub API та будь-яким стороннім доступним стороннім API. Наприклад, дія може публікувати npm-модулі, надсилати SMS-сповіщення, коли створюються нагальні питання (issues), або розгортати готовий до виробництва код.

Дії можуть виконуватися безпосередньо на машині або в контейнері Docker. Ви можете визначити вхідні, вихідні змінні та змінні середовища для дії.

### Типи дій

Ви можете створити контейнер Docker та дії JavaScript. Для дій потрібен файл метаданих для означення входів, виходів та основної точки входу для вашої дії. Ім'я файлу метаданих має бути або  `action.yml` , або `action.yaml`. Для отримання додаткової інформації див. "[Синтаксис метаданих для дій GitHub](https://help.github.com/en/articles/metadata-syntax-for-github-actions)."

| Тип              | Операційна система    |
| ---------------- | --------------------- |
| Docker container | Linux                 |
| JavaScript       | Linux, MacOS, Windows |

#### Docker container actions

Докер-контейнери пакують середовище кодом GitHub Actions. Це створює більш послідовну та надійну одиницю роботи, оскільки споживачеві дії не потрібно турбуватися про інструменти чи залежності. Дії контейнерів Docker можуть виконуватися лише в середовищі Linux, розміщеної GitHub.

Контейнер Docker дозволяють використовувати конкретні версії операційної системи, залежності, інструменти та код. Для дій, які повинні виконуватись у певній конфігурації середовища, Docker - ідеальний варіант, оскільки ви можете налаштувати операційну систему та інструменти. Через затримку для складання та отримання контейнера дії Docker-контейнера відбувається повільніше, ніж дії JavaScript.

Самостійно розміщені виконувачі (runners) повинні використовувати операційну систему Linux та встановити Docker для запуску дій контейнерів Docker. Для отримання додаткової інформації про вимоги самостійно розміщуваних виконувачів, див. "[About self-hosted runners](https://help.github.com/en/actions/hosting-your-own-runners/about-self-hosted-runners#requirements-for-self-hosted-runner-machines)."

#### JavaScript actions

Дії JavaScript можуть виконуватись безпосередньо на машині виконувача та відокремлювати код дії від середовища, яке використовується для запуску коду. Використання дії JavaScript спрощує код дії та виконується швидше, ніж дія контейнера Docker.

Для того, щоб ваші дії JavaScript були сумісні з усіма виконувачами, розміщеними на GitHub (Ubuntu, Windows та macOS), упакований код JavaScript повинен бути чистим JavaScript, а не покладатися на інші бінарні файли. Дії JavaScript виконуються безпосередньо на виконувачі та використовують бінарні файли, які вже існують у віртуальному середовищі.

Для запуску дій JavaScript повинен бути встановлений Node.js для власників хостингу. Для отримання додаткової інформації про вимоги самостійно розміщуваних виконувачів, див. "[About self-hosted runners](https://help.github.com/en/actions/hosting-your-own-runners/about-self-hosted-runners#requirements-for-self-hosted-runner-machines)."

Якщо ви розробляєте проект Node.js, інструментарій дій GitHub надає пакети, які ви можете використовувати у своєму проекті для прискорення розгортання. Для отримання додаткової інформації дивіться сховище [actions/toolkit](https://github.com/actions/toolkit) 

### Вибір розміщення дій

Якщо ви розробляєте дію для використання іншими людьми, радимо зберігати дію у власному сховищі, а не зв'язувати її з іншим кодом програми. Це дозволяє вам керувати версіями, відстежувати та випускати дії, як і будь-яке інше програмне забезпечення.

Зберігання дії у власному сховищі полегшує співтовариству GitHub виявлення дії, звужує область кодової бази для розробників, що виправляють проблеми та розширюють дію, і відриває версію дії від версії іншого коду програми.

Якщо ви будуєте дію, яку ви не плануєте надавати загальнодоступній, ви можете зберігати файли дії в будь-якому місці вашого сховища. Якщо ви плануєте поєднувати дії, робочий процес та код програми в одному сховищі, радимо зберігати дії в каталозі `.github`. Наприклад, `.github/actions/action-a` та `.github/actions/action-b`.

### Керування версіями дій

Робочі процеси (Workflows) можуть посилатись на конкретні версії дій, використовуючи SHA-фіксацію, гілку чи тег.

```yaml
steps:    
  - uses: actions/setup-node@74bc508 # Reference a specific commit
  - uses: actions/setup-node@v1.0    # Reference the major version of a release   
  - uses: actions/setup-node@master  # Reference a branch
```

GitHub рекомендує використовувати семантичне версіювання під час створення дій, щоб забезпечити людям стабільний досвід. Для отримання додаткової інформації див. "[Semantic versioning](http://semver.org/)."

1. Створіть випуск за допомогою семантичної версії (v1.0.9). Для отримання додаткової інформації див. "[Creating releases](https://help.github.com/en/articles/creating-releases)."

2. Перемістіть тег основної версії (v1, v2 тощо), щоб вказати на Git ref поточного випуску. Для отримання додаткової інформації дивіться "[Git basics - tagging](https://git-scm.com/book/en/v2/Git-Basics-Tagging)."
3. Введіть новий основний тег версії (v2) для порушення змін, які порушать існуючі робочі процеси. Наприклад, зміна вхідних даних може бути суттєвою.

### Створення файлу README для дії

Якщо ви плануєте публічно ділитися своєю дією, радимо створити файл README, щоб люди могли навчитися використовувати вашу дію. Ви можете включити цю інформацію до свого `README.md`:

- Детальний опис того, що робить дія

- Необхідні аргументи введення та виведення
- Необов'язкові аргументи введення та виведення
- Секрети використання дій
- змінні середовища, які використовує дія
- Приклад того, як використовувати свою дію в робочому процесі



| [<- до лекцій](README.md) | [на основну сторінку курсу](../README.md) |
| ------------------------- | ----------------------------------------- |
|                           |                                           |